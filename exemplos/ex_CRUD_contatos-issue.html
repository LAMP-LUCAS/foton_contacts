<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Protótipo de Gestão de Contatos</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
    <style>
        body {
            font-family: 'Inter', sans-serif;
        }
        /* Estilos para o placeholder da lista de selecionados */
        #selected-contacts-list:empty::before {
            content: 'Nenhum contato selecionado. Adicione contatos da lista à esquerda para começar.';
            display: block;
            text-align: center;
            padding: 4rem 2rem;
            color: #6b7280; /* text-gray-500 */
            border: 2px dashed #d1d5db; /* border-gray-300 */
            border-radius: 0.5rem; /* rounded-lg */
        }
        .contact-card-enter {
            opacity: 0;
            transform: scale(0.95);
            transition: all 0.2s ease-out;
        }
        .contact-card-enter-active {
            opacity: 1;
            transform: scale(1);
        }
    </style>
</head>
<body class="bg-gray-100 text-gray-800">

    <div class="container mx-auto p-4 md:p-8">
        <header class="mb-8">
            <h1 class="text-3xl font-bold text-gray-900">Busca e Seleção de Contatos</h1>
            <p class="text-gray-600 mt-1">Um protótipo interativo demonstrando ideias de UI/UX com Hotwire em mente.</p>
        </header>

        <main class="grid grid-cols-1 lg:grid-cols-2 gap-8">
            <!-- Coluna da Esquerda: Busca e Resultados -->
            <div class="bg-white p-6 rounded-xl shadow-lg flex flex-col h-full max-h-[85vh]">
                <h2 class="text-xl font-semibold mb-4">1. Encontre os Contatos</h2>
                <div class="relative mb-4">
                    <svg class="absolute left-3 top-1/2 -translate-y-1/2 h-5 w-5 text-gray-400" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z" />
                    </svg>
                    <input type="text" id="search-input" placeholder="Buscar por nome, e-mail ou telefone..." class="w-full pl-10 pr-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500 transition">
                </div>
                
                <div id="contacts-list" class="flex-grow overflow-y-auto pr-2 -mr-2 space-y-3">
                    <!-- Contatos serão inseridos aqui via JS -->
                </div>
                 <div id="no-results" class="hidden text-center py-10 text-gray-500">
                    <p class="font-semibold">Nenhum contato encontrado.</p>
                    <p class="text-sm">Tente ajustar seus termos de busca.</p>
                </div>
            </div>

            <!-- Coluna da Direita: Selecionados e Salvar Grupo -->
            <div class="bg-white p-6 rounded-xl shadow-lg flex flex-col h-full max-h-[85vh]">
                <h2 class="text-xl font-semibold mb-4">2. Contatos Selecionados <span id="selected-count" class="text-base font-medium text-indigo-600 bg-indigo-100 rounded-full px-2 py-0.5 ml-2">0</span></h2>
                <div id="selected-contacts-list" class="flex-grow overflow-y-auto pr-2 -mr-2 space-y-3 border-t pt-4">
                    <!-- Placeholder ou contatos selecionados aqui -->
                </div>
                
                <!-- Formulário para Salvar Grupo -->
                <div id="save-group-form" class="mt-auto pt-6 border-t border-gray-200" style="display: none;">
                    <h3 class="text-lg font-semibold mb-3">3. Salvar como Grupo</h3>
                    <div class="space-y-4">
                        <input type="text" id="group-name" placeholder="Nome do Grupo" class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500 transition">
                        
                        <fieldset>
                            <legend class="text-sm font-medium text-gray-700 mb-2">Tipo de Grupo</legend>
                            <div class="flex items-center gap-6">
                                <label class="flex items-center space-x-2 cursor-pointer">
                                    <input type="radio" name="group-type" value="generic" class="h-4 w-4 text-indigo-600 border-gray-300 focus:ring-indigo-500" checked>
                                    <span class="text-gray-800">Genérico</span>
                                </label>
                                <label class="flex items-center space-x-2 cursor-pointer">
                                    <input type="radio" name="group-type" value="perennial" class="h-4 w-4 text-indigo-600 border-gray-300 focus:ring-indigo-500">
                                    <span class="text-gray-800">Perene</span>
                                </label>
                            </div>
                        </fieldset>

                        <button id="save-group-btn" class="w-full bg-indigo-600 text-white font-semibold py-2.5 px-4 rounded-lg hover:bg-indigo-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500 transition-colors duration-200 flex items-center justify-center">
                             <svg class="h-5 w-5 mr-2" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 13l4 4L19 7" />
                            </svg>
                            Salvar Grupo
                        </button>
                    </div>
                </div>
            </div>
        </main>
    </div>
    
    <!-- Toast Notification -->
    <div id="toast" class="fixed bottom-5 right-5 bg-gray-900 text-white py-3 px-5 rounded-lg shadow-xl opacity-0 translate-y-4 transition-all duration-300 ease-out">
        <span id="toast-message"></span>
        <button id="toast-undo" class="ml-4 font-semibold text-indigo-400 hover:text-indigo-300">Desfazer</button>
    </div>


<script>
document.addEventListener('DOMContentLoaded', () => {
    // --- Dados Mockados ---
    const contactsData = [
        { id: 1, name: 'Alice Johnson', email: 'alice.j@example.com', phone: '111-222-3333', company: 'Innovate Inc.' },
        { id: 2, name: 'Robert Brown', email: 'b.robert@example.com', phone: '222-333-4444', company: 'Solutions Co.' },
        { id: 3, name: 'Carlos Santos', email: 'carlos.s@example.com.br', phone: '333-444-5555', company: 'Foton' },
        { id: 4, name: 'Diana Prince', email: 'diana.p@example.com', phone: '444-555-6666', company: 'Themyscira Corp.' },
        { id: 5, name: 'Ethan Hunt', email: 'ethan.h@example.com', phone: '555-666-7777', company: 'IMF' },
        { id: 6, name: 'Fiona Gallagher', email: 'fiona.g@example.com', phone: '666-777-8888', company: 'Solutions Co.' },
        { id: 7, name: 'George Costanza', email: 'g.costanza@example.com', phone: '777-888-9999', company: 'Vandelay Industries' },
        { id: 8, name: 'Hannah Montana', email: 'hannah.m@example.com', phone: '888-999-0000', company: 'Stewart Productions' },
        { id: 9, name: 'Ian Malcolm', email: 'ian.m@example.com', phone: '999-000-1111', company: 'Chaos Theory LLC' },
        { id: 10, name: 'Julia Roberts', email: 'julia.r@example.com', phone: '000-111-2222', company: 'Actress Guild' },
        { id: 11, name: 'Kevin McCallister', email: 'kevin.m@example.com', phone: '111-333-5555', company: 'Home Security' },
        { id: 12, name: 'Laura Palmer', email: 'laura.p@example.com', phone: '222-444-6666', company: 'Twin Peaks Cafe' },
        { id: 13, name: 'Miguel O"Hara', email: 'miguel.ohara@example.com', phone: '333-555-7777', company: 'Alchemax' },
        { id: 14, name: 'Nina Simone', email: 'nina.s@example.com', phone: '444-666-8888', company: 'Music Legends' },
        { id: 15, name: 'Oscar Martinez', email: 'oscar.m@example.com', phone: '555-777-9999', company: 'Dunder Mifflin' },
        { id: 16, name: 'Pedro Pascal', email: 'pedro.p@example.com', phone: '666-888-0000', company: 'Actor"s Union' },
        { id: 17, name: 'Quentin Tarantino', email: 'quentin.t@example.com', phone: '777-999-1111', company: 'A Band Apart' },
        { id: 18, name: 'Rachel Green', email: 'rachel.g@example.com', phone: '888-000-2222', company: 'Ralph Lauren' },
        { id: 19, name: 'Silvio Santos', email: 'silvio.s@example.com.br', phone: '999-111-3333', company: 'SBT' },
        { id: 20, name: 'Tiago Leifert', email: 'tiago.l@example.com.br', phone: '000-222-4444', company: 'Rede Globo' }
    ];

    // --- Elementos do DOM ---
    const contactsList = document.getElementById('contacts-list');
    const selectedContactsList = document.getElementById('selected-contacts-list');
    const searchInput = document.getElementById('search-input');
    const selectedCount = document.getElementById('selected-count');
    const saveGroupForm = document.getElementById('save-group-form');
    const noResultsDiv = document.getElementById('no-results');
    const toast = document.getElementById('toast');
    const toastMessage = document.getElementById('toast-message');
    const toastUndo = document.getElementById('toast-undo');
    
    let selectedContacts = new Map();
    let lastRemovedContact = null;
    let toastTimeout;

    // --- Funções ---

    const getAvatarUrl = (name) => {
        return `https://ui-avatars.com/api/?name=${encodeURIComponent(name)}&background=random&color=fff&rounded=true&size=40`;
    };

    const renderContactCard = (contact, isSelected = false) => {
        return `
            <div id="contact-${contact.id}" data-id="${contact.id}" data-name="${contact.name}" data-email="${contact.email}" data-phone="${contact.phone}" class="contact-card flex items-center justify-between p-3 bg-gray-50 rounded-lg hover:bg-gray-100 transition-colors duration-150">
                <div class="flex items-center space-x-3">
                    <img class="w-10 h-10 rounded-full" src="${getAvatarUrl(contact.name)}" alt="${contact.name}">
                    <div>
                        <p class="font-semibold text-gray-800">${contact.name}</p>
                        <p class="text-sm text-gray-500">${contact.email}</p>
                    </div>
                </div>
                <button data-action="add" class="add-btn text-sm font-medium ${isSelected ? 'bg-gray-200 text-gray-500 cursor-not-allowed' : 'bg-indigo-100 text-indigo-700 hover:bg-indigo-200'} rounded-full px-4 py-1.5 transition-all duration-200">${isSelected ? 'Adicionado' : 'Adicionar'}</button>
            </div>
        `;
    };

    const renderSelectedContactCard = (contact) => {
        const card = document.createElement('div');
        card.id = `selected-contact-${contact.id}`;
        card.className = 'selected-card flex items-center justify-between p-3 bg-white rounded-lg border border-gray-200 animate-enter';
        card.innerHTML = `
            <div class="flex items-center space-x-3">
                <img class="w-10 h-10 rounded-full" src="${getAvatarUrl(contact.name)}" alt="${contact.name}">
                <div>
                    <p class="font-semibold text-gray-800">${contact.name}</p>
                    <p class="text-sm text-gray-500">${contact.phone}</p>
                </div>
            </div>
            <button data-id="${contact.id}" data-action="remove" class="remove-btn text-gray-400 hover:text-red-600 p-1 rounded-full transition-colors">
                <svg class="h-5 w-5" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12" />
                </svg>
            </button>
        `;
        // Adiciona a classe de animação após um pequeno delay para garantir que ela funcione
        requestAnimationFrame(() => {
            card.classList.add('contact-card-enter');
            requestAnimationFrame(() => card.classList.add('contact-card-enter-active'));
        });
        return card;
    };
    
    const updateUI = () => {
        selectedCount.textContent = selectedContacts.size;
        saveGroupForm.style.display = selectedContacts.size > 0 ? 'block' : 'none';
        
        // Atualiza estado dos botões na lista de busca
        document.querySelectorAll('#contacts-list .contact-card').forEach(card => {
            const id = parseInt(card.dataset.id);
            const button = card.querySelector('.add-btn');
            if (selectedContacts.has(id)) {
                button.textContent = 'Adicionado';
                button.disabled = true;
                button.className = 'add-btn text-sm font-medium bg-gray-200 text-gray-500 cursor-not-allowed rounded-full px-4 py-1.5 transition-all duration-200';
            } else {
                button.textContent = 'Adicionar';
                button.disabled = false;
                button.className = 'add-btn text-sm font-medium bg-indigo-100 text-indigo-700 hover:bg-indigo-200 rounded-full px-4 py-1.5 transition-all duration-200';
            }
        });
    };
    
    const showToast = (message, showUndo = false) => {
        clearTimeout(toastTimeout);
        toastMessage.textContent = message;
        toastUndo.style.display = showUndo ? 'inline' : 'none';
        toast.classList.remove('opacity-0', 'translate-y-4');
        toast.classList.add('opacity-100', 'translate-y-0');

        if (!showUndo) {
            toastTimeout = setTimeout(() => {
                toast.classList.remove('opacity-100', 'translate-y-0');
                toast.classList.add('opacity-0', 'translate-y-4');
            }, 3000);
        }
    };
    
    const hideToast = () => {
        toast.classList.remove('opacity-100', 'translate-y-0');
        toast.classList.add('opacity-0', 'translate-y-4');
    };

    const addContact = (contact) => {
        if (!selectedContacts.has(contact.id)) {
            selectedContacts.set(contact.id, contact);
            const cardElement = renderSelectedContactCard(contact);
            selectedContactsList.appendChild(cardElement);
            updateUI();
        }
    };

    const removeContact = (contactId) => {
        if (selectedContacts.has(contactId)) {
            lastRemovedContact = selectedContacts.get(contactId);
            selectedContacts.delete(contactId);
            document.getElementById(`selected-contact-${contactId}`)?.remove();
            updateUI();
            showToast(`"${lastRemovedContact.name}" removido.`, true);
        }
    };

    // --- Lógica de Eventos ---

    searchInput.addEventListener('input', () => {
        const searchTerm = searchInput.value.toLowerCase();
        let resultsFound = false;
        document.querySelectorAll('#contacts-list .contact-card').forEach(card => {
            const name = card.dataset.name.toLowerCase();
            const email = card.dataset.email.toLowerCase();
            const phone = card.dataset.phone.toLowerCase();
            if (name.includes(searchTerm) || email.includes(searchTerm) || phone.includes(searchTerm)) {
                card.style.display = 'flex';
                resultsFound = true;
            } else {
                card.style.display = 'none';
            }
        });
        noResultsDiv.style.display = resultsFound ? 'none' : 'block';
    });

    contactsList.addEventListener('click', (e) => {
        if (e.target.matches('.add-btn') && !e.target.disabled) {
            const card = e.target.closest('.contact-card');
            const contact = {
                id: parseInt(card.dataset.id),
                name: card.dataset.name,
                email: card.dataset.email,
                phone: card.dataset.phone
            };
            addContact(contact);
        }
    });

    selectedContactsList.addEventListener('click', (e) => {
        const removeButton = e.target.closest('.remove-btn');
        if (removeButton) {
            const idToRemove = parseInt(removeButton.dataset.id);
            removeContact(idToRemove);
        }
    });
    
    toastUndo.addEventListener('click', () => {
        if(lastRemovedContact) {
            addContact(lastRemovedContact);
            lastRemovedContact = null;
            hideToast();
        }
    });

    document.getElementById('save-group-btn').addEventListener('click', () => {
        const groupName = document.getElementById('group-name').value;
        if (!groupName) {
            alert('Por favor, dê um nome ao grupo.');
            return;
        }
        console.log('Grupo salvo!', {
            name: groupName,
            type: document.querySelector('input[name="group-type"]:checked').value,
            members: Array.from(selectedContacts.values())
        });
        alert(`Grupo "${groupName}" salvo com ${selectedContacts.size} contatos!`);
    });

    // --- Inicialização ---
    contactsList.innerHTML = contactsData.map(contact => renderContactCard(contact)).join('');
});
</script>

</body>
</html>
