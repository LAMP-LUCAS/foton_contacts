<% if pairs.empty? %>
  <div class="nodata">
    <p><%= l(:text_no_duplicates_found) %></p>
  </div>
<% else %>
  <table class="list">
    <thead>
      <tr>
        <th><%= check_box_tag 'check_all', '', false, class: 'toggle-selection', 'data-target': '.pair-checkbox' %></th>
        <th><%= l(:field_name) %></th>
        <th><%= l(:field_email) %></th>
        <th><%= l(:field_phone) %></th>
        <th><%= l(:label_potential_match_reason) %></th>
        <th></th>
      </tr>
    </thead>
    <tbody>
      <% pairs.each do |pair| %>
        <% contact1 = FotonContact.find(pair[0]) %>
        <% contact2 = FotonContact.find(pair[1]) %>
        <tr>
          <td class="checkbox"><%= check_box_tag "pair_ids[]", "#{pair[0]}-#{pair[1]}", false, class: 'pair-checkbox' %></td>
          <td><%= contact1.name %> / <%= contact2.name %></td>
          <td><%= contact1.email %> / <%= contact2.email %></td>
          <td><%= contact1.phone %> / <%= contact2.phone %></td>
          <td><%= pair[2] %></td>
          <td class="buttons"><%= link_to l(:button_review), data_quality_path(id: pair[0], other_id: pair[1]), class: 'icon icon-edit', data: { turbo_frame: '_top' } %></td>
        </tr>
      <% end %>
    </tbody>
  </table>

<script>
  document.getElementById('check_all').addEventListener('click', function(event) {
    const isChecked = event.target.checked;
    document.querySelectorAll('.pair-checkbox').forEach(cb => cb.checked = isChecked);
  });
</script>
<% end %>
